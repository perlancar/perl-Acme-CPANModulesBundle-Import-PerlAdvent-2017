<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Language" content="en" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="WWW::AdventCalendar v1.113" />
    <link rel="alternate" title="Perl Advent Calendar 2017 XML feed" href="atom.xml" type="application/atom+xml" />
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="stylesheet" href="style.css" type="text/css" />
    <link rel="stylesheet" href="2017.css" type="text/css" />
    <title>
Perl Advent Calendar 2017 - 
Reindeer

</title>
</head>
<body>
    <div id="contentwrapper">
        <div id="header">
            <h1><a href="index.html">Perl Advent Calendar 2017</a></h1>
        </div>

        <p id="tagline">2017 twenty four merry days of Perl
         <a class='feed' href="atom.xml">Feed</a>
        </p>

        <div id="content">
          

<h1 class='title'>Reindeer</h1>
<div class='subtitle'>Reindeer - 2017-12-20</div>

<div class='pod'><p>This year the Elves at the North Pole had learned a lot about powerful packages they could load to improve Moose. The problem was that things were getting a little on the long winded size at the top of each of their Moose-based packages...</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;<br />4:&nbsp;<br />5:&nbsp;<br />6:&nbsp;<br />7:&nbsp;<br />8:&nbsp;<br />9:&nbsp;<br />10:&nbsp;<br />11:&nbsp;<br />12:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">package</span> <span class="word">ChristmasTree</span><span class="structure">;</span><br /><br /><span class="keyword">use</span> <span class="word">Moose</span><span class="structure">;</span><br /><span class="keyword">use</span> <span class="word">MooseX::AttributeShortcuts</span><span class="structure">;</span><br /><span class="keyword">use</span> <span class="word">MooseX::AutoDestruct</span><span class="structure">;</span><br /><span class="keyword">use</span> <span class="word">MooseX::CascadeClearing</span><span class="structure">;</span><br /><span class="keyword">use</span> <span class="word">MooseX::ClassAttributes</span><span class="structure">;</span><br /><span class="keyword">use</span> <span class="word">MooseX::LazyRequire</span><br /><span class="keyword">use</span> <span class="word">MooseX::StrictConstructor</span><span class="structure">;</span><br /><span class="keyword">use</span> <span class="word">MooseX::UndefTolerant::Attribute</span><span class="structure">;</span><br /><br /><span class="operator">...</span></code><br />&nbsp;</td></table>

<p>It was enough to make the Wise Old Elf&#39;s RSI flair up once more. Something had to be done. It was time for something better than Moose.</p>

<p>What&#39;s better than Moose for one of Santa&#39;s Elves? That&#39;s right: <a href="https://metacpan.org/module/Reindeer">Reindeer</a>. Still the same thing, but with more aerodynamic antlers.</p>

<p>The Reindeer module from the CPAN is a wrapper for Moose that not only loads Moose into your class but loads a whole bunch of handy Moose extensions too. In fact, the above code could simply be replaced by:</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">package</span> <span class="word">ChristmasTree</span><span class="structure">;</span><br /><span class="keyword">use</span> <span class="word">Reindeer</span><span class="structure">;</span></code><br />&nbsp;</td></table>

<h3 id="Does-All-The-Things">Does All The Things</h3>

<p>Reindeer does so much that it&#39;s hard to document it all...</p>

<h4 id="All-our-Favourite-Extensions">All our Favourite Extensions</h4>

<p>Reindeer pulls in a bunch of modules that:</p>

<ul>

<li><p>Provide syntax for abstract methods</p>

</li>
<li><p>Enable coercion by default (i.e. making it opt-out rather than opt-in)</p>

</li>
<li><p>Use shortcuts when writing attribute declarations</p>

</li>
<li><p>Provides currying for attribute delegation</p>

</li>
<li><p>Give you the ability to write class level attributes</p>

</li>
<li><p>Throw exceptions if you try to read an un-set attribute</p>

</li>
<li><p>Offer better syntax for overriding default values for attributes in subclasses</p>

</li>
<li><p>Throw exceptions if unknown parameters are passed to your constructor</p>

</li>
<li><p>Better construct anonymous classes with extra traits</p>

</li>
</ul>

<h4 id="Type-Libraries">Type Libraries</h4>

<p>Reindeer exports a bunch of type libraries into your code. This means, for example, instead of writing your types as strings like so:</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="word">has</span> <span class="word">counter</span> <span class="operator">=&gt;</span> <span class="structure">(</span> <span class="word">is</span> <span class="operator">=&gt;</span> <span class="single">'ro'</span><span class="operator">,</span> <span class="word">isa</span> <span class="operator">=&gt;</span> <span class="single">'Int'</span><span class="operator">,</span> <span class="word">default</span> <span class="operator">=&gt;</span> <span class="number">0</span> <span class="structure">);</span></code><br />&nbsp;</td></table>

<p>You can write the same thing using a bunch of types like so:</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="word">has</span> <span class="word">counter</span> <span class="operator">=&gt;</span> <span class="structure">(</span> <span class="word">is</span> <span class="operator">=&gt;</span> <span class="single">'ro'</span><span class="operator">,</span> <span class="word">isa</span> <span class="operator">=&gt;</span> <span class="word">Int</span><span class="operator">,</span> <span class="word">default</span> <span class="operator">=&gt;</span> <span class="number">0</span> <span class="structure">);</span></code><br />&nbsp;</td></table>

<p>While these are just fancy no-argument function calls that return their own name (which are often inlined by the perl compiler) they act and feel like a real Perl syntax for types.</p>

<p>Not only do you save those two characters, but by using function calls instead of strings, you also get all the advantages of <code>use strict</code> to catch typos at compile time.</p>

<h4 id="Trait-Aliases">Trait Aliases</h4>

<p>Similarly Reindeer exports named traits (again, zero parameter functions, but actual implementations details aren&#39;t important.) So instead of writing:</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;<br />3:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">use</span> <span class="word">Moose</span><span class="structure">;</span><br /><span class="keyword">use</span> <span class="word">MooseX::Attribute::ENV</span><span class="structure">;</span><br /><span class="word">has</span> <span class="word">home</span> <span class="operator">=&gt;</span> <span class="structure">(</span> <span class="word">is</span> <span class="operator">=&gt;</span> <span class="single">'ro'</span><span class="operator">,</span> <span class="word">trait</span> <span class="operator">=&gt;</span> <span class="structure">[</span> <span class="single">'ENV'</span> <span class="structure">])</span></code><br />&nbsp;</td></table>

<p>You can write:</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;<br />2:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">use</span> <span class="word">Reindeer</span><span class="structure">;</span><br /><span class="word">has</span> <span class="word">home</span> <span class="operator">=&gt;</span> <span class="structure">(</span> <span class="word">is</span> <span class="operator">=&gt;</span> <span class="single">'ro'</span><span class="operator">,</span> <span class="word">trait</span> <span class="operator">=&gt;</span> <span class="structure">[</span> <span class="word">ENV</span> <span class="structure">])</span></code><br />&nbsp;</td></table>

<p>As well as providing the slight reduction in typing, better typo checking, this also provides lazy loading of the trait classes - the first time the named trait is used the trait class will be loaded (this means there&#39;s no penalty for having the traits available if you don&#39;t use them.)</p>

<h4 id="Extra-Language-Features-and-Extensions">Extra Language Features and Extensions</h4>

<p>Reindeer also enables a bunch non-Moose extra things that are either optional in Perl, or are standard extensions.</p>

<ul>

<li><p>Enables all features for the version of Perl you&#39;re running. For example, if you&#39;re running 5.10 or later then you&#39;ll be able to use the <code>say</code> keyword.</p>

</li>
<li><p>Provides <code>try</code>, <code>catch</code> and <code>finally</code> from <a href="https://metacpan.org/module/Try::Tiny">Try::Tiny</a> to give you handy <code>try { ...}</code> blocks.</p>

</li>
<li><p>Cleans your namespace with <a href="https://metacpan.org/module/namespace::autoclean">namespace::autoclean</a> so utility functions you import aren&#39;t callable as methods</p>

</li>
</ul>

<h3 id="Less-Typing-Is-Less-Mistakes">Less Typing Is Less Mistakes</h3>

<p>The Wise Old Elf was happy. He was well aware that a large amount of the code written by the Elves was written in the last few weeks before Christmas in a big rush. Not only would Reindeer act as a force multiplier for his development team making their work quicker, it would also reduce the amount of code they&#39;d have to write, and hopefully therefore the number of chances to introduce bugs.</p>



</div>

<div id='author'>
<img alt='Gravatar Image' style='vertical-align:middle' src=http://www.gravatar.com/avatar/5d71b5f0c61e97cd452d625cc24a4c82?r=g&s=80&d=retro />
This article contributed by: Mark Fowler &lt;mark@twoshortplanks.com&gt;
</div>


<ul id="pager">
    <li class="previous"><a title="Maybe not" href="2017-12-19.html">Previous</a></li>

    <li class="next"><a title="Quickly Building DBIx::Class Schemas" href="2017-12-21.html">Next</a></li>
</ul>
<div style="clear: both"></div>

        </div>

    </div>



<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-27056407-1");
pageTracker._trackPageview();
} catch(err) {}</script>
</body>
</html>





