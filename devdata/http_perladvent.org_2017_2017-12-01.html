<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Language" content="en" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="WWW::AdventCalendar v1.113" />
    <link rel="alternate" title="Perl Advent Calendar 2017 XML feed" href="atom.xml" type="application/atom+xml" />
    <link rel="shortcut icon" href="favicon.ico" />
    <link rel="stylesheet" href="style.css" type="text/css" />
    <link rel="stylesheet" href="2017.css" type="text/css" />
    <title>
Perl Advent Calendar 2017 - 
Emoji

</title>
</head>
<body>
    <div id="contentwrapper">
        <div id="header">
            <h1><a href="index.html">Perl Advent Calendar 2017</a></h1>
        </div>

        <p id="tagline">2017 twenty four merry days of Perl
         <a class='feed' href="atom.xml">Feed</a>
        </p>

        <div id="content">
          

<h1 class='title'>Emoji</h1>
<div class='subtitle'>Printing Unicode with Perl - 2017-12-01</div>

<div class='pod'><p>One of the great things about the Wise Old Elf&#39;s job was that he got to keep up with all the latest fads the kids were up to. He fondly remembered the hula-hoop craze. Micromachines. Pogs. Oh the memories!</p>

<p>Today&#39;s modern day kids are all about text messages. But not just any old text in their text messages. No, these kids are all about the Emojis. And honestly, how could anyone at the North Pole not love Emojis too? After all, Santa has his <b>very own emoji</b>: Character 127877 in Unicode <code>FATHER CHRISTMAS</code>.</p>

<center><font size="48">&#127877;</font></center>

<p>The Wise Old Elf was working on Perl script to generate text messages to all the elves telling them what a good job they were doing this year. And, of course, this would include the Father Christmas emoji.</p>

<p>The first thing the Wise Old Elf did was universally enable UTF-8 encoding on STDOUT, STDIN, and STDERR with an <code>open</code> pragma:</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">use</span> <span class="pragma">open</span> <span class="words">qw( :encoding(UTF-8) :std )</span><span class="structure">;</span></code><br />&nbsp;</td></table>

<p>Now when he printed out his emoji Perl would be outputting the byte sequence necessary to represent that emoji in UTF-8 and (hopefully) the other end would be able to recognize the code for Santa and Do The Right Thing.</p>

<p>He then simply printed out the message he wanted, using the hexadecimal code for <code>127877</code>, <code>1F385</code>.</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="word">print</span> <span class="double">&quot;\x{1F385} thanks you for all your hard work tonight&quot;</span><span class="structure">;</span></code><br />&nbsp;</td></table>

<p>No sooner had he typed this then he started to have second thoughts. <code>\x{1F385}</code> isn&#39;t exactly the most instantly recognizable code. What if he had accidentally typed <code>\x{1F383}</code> by mistake, the Unicode character for the jack-o-lantern. What a Nightmare Before Christmas situation that would be!</p>

<p>Of course, the Wise Old Elf was using a modern editor which would be happy to edit utf-8 encoded source code, so he could simply enable UTF-8 source code in Perl too by declaring:</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="keyword">use</span> <span class="pragma">utf8</span><span class="structure">;</span></code><br />&nbsp;</td></table>

<p>At the top of the source code, and then he&#39;d be able to simply write:</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="word">print</span> <span class="double">&quot;&#127877; thanks you for all your hard work tonight&quot;</span><span class="structure">;</span></code><br />&nbsp;</td></table>

<p>Was he done? He wasn&#39;t so sure.</p>

<p>Typing this would this either involve some crazy keyboard shenanigans to type, or he&#39;d have to copy-and-paste from a Unicode pallet. It wasn&#39;t the best situation, but he could put up with that.</p>

<p>The main problem was that the Wise Old Elf was Old enough (and Wise enough) to know that not all editors support UTF-8 source code and all it&#39;ll take is one Elf using an editor doing the wrong thing with encodings to potentially break everything. The last thing the Wise Old Elf needed was to post a message of thanks for a bunch of unrenderable character sequences instead of the man in the red suit.</p>

<p>Luckily Perl is able to represent all Unicode characters in a simple, readable, ASCII encodable way: You can use the <code>\N{...}</code> sequence with the official name of the character:</p>

<table class='code-listing'><tr><td class='line-numbers'><br /><code>1:&nbsp;</code><br />&nbsp;</td><td class='code'><br /><code><span class="word">print</span> <span class="double">&quot;\N{FATHER CHRISTMAS} thanks you for all your hard work tonight&quot;</span><span class="structure">;</span></code><br />&nbsp;</td></table>

</div>

<div id='author'>
<img alt='Gravatar Image' style='vertical-align:middle' src=http://www.gravatar.com/avatar/5d71b5f0c61e97cd452d625cc24a4c82?r=g&s=80&d=retro />
This article contributed by: Mark Fowler &lt;mark@twoshortplanks.com&gt;
</div>


<ul id="pager">
    <li class="previous">Previous</li>

    <li class="next"><a title="Around the world with Emoji" href="2017-12-02.html">Next</a></li>
</ul>
<div style="clear: both"></div>

        </div>

    </div>



<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-27056407-1");
pageTracker._trackPageview();
} catch(err) {}</script>
</body>
</html>





